name: SQL Server Deployment Pipeline

on:
  workflow_dispatch:

jobs:
  development:
    uses: ./.github/workflows/TestTemplate.yml
    with:
      server_type: "development"
      sql_script_path: "DatabaseAdministration/SQLStatements/ProductionAndDeploymentProject.sql"
    secrets: inherit  # Ensures all secrets are passed automatically

  production:
    needs: development
    uses: ./.github/workflows/TestTemplate.yml
    with:
      server_type: "production"
      sql_script_path: "DatabaseAdministration/SQLStatements/ProductionAndDeploymentProject.sql"
    secrets: inherit  # Ensures all secrets are passed automatically
